"use strict";(()=>{function u(o,t,e=!1){let i=T(o,t);if(!i)return e;try{return JSON.parse(i.toLowerCase())===!0}catch{return!0}}function O(o,t,e=0){let i=T(o,t),n=parseFloat(i);return isNaN(n)?e:n}function W(o,t,e=""){return T(o,t)||e}function D(o,t,e=0){let i=T(o,t);if(!i)return e;let n=i.toLowerCase(),s="",r=1e3;if(n.endsWith("ms")?(s=n.slice(0,-2).trim(),r=1):n.endsWith("s")?(s=n.slice(0,-1).trim(),r=1e3):(s=n.trim(),r=1e3),!s)return e;let a=parseFloat(s);return isNaN(a)?e:a*r}function T(o,t){let e=getComputedStyle(o).getPropertyValue(t).trim();return(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))&&(e=e.slice(1,-1)),e}function d(o,t){return t<=o?o-t:o<0?t+o:o}function h(o,t=1e-4){return o<t?0:1-t<o?1:o}function Y(o){0<navigator.maxTouchPoints&&o.addEventListener("pointerenter",t=>{let e=t.pointerType!=="mouse";o.classList.toggle("touch",e)})}function m(o){let t=0,e=i=>{t!==0&&o(i,i-t),t=i,window.requestAnimationFrame(e)};window.requestAnimationFrame(e)}function $(o){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",o):setTimeout(o,0)}function G(o,t,e){new IntersectionObserver(n=>{for(let s of n)o.classList.toggle(t,s.isIntersecting)},{rootMargin:`${e}px 0px`}).observe(o),document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="visible"){let s=o.getBoundingClientRect(),r=window.innerHeight;s.top<r&&0<s.bottom&&o.classList.add(t)}else o.classList.remove(t)})}function X(o){return Promise.all(o.map(t=>t.complete&&t.naturalWidth!==0?Promise.resolve():new Promise((e,i)=>{t.addEventListener("load",()=>e(),{once:!0}),t.addEventListener("error",()=>i(new Error("Image failed to load")),{once:!0})}))).then(()=>!0,()=>!1)}function z(o){return Promise.all(o.map(t=>t.readyState>=1?Promise.resolve():new Promise((e,i)=>{t.addEventListener("loadedmetadata",()=>e(),{once:!0}),t.addEventListener("error",()=>i(new Error("Video failed to load metadata")),{once:!0})}))).then(()=>!0,()=>!1)}var rt="background",ot="visible",S=class{#t=[];constructor(t,e){let i=document.createElement("div");i.classList.add(rt),t.insertBefore(i,t.firstChild),this.#t=e.map(n=>{let s=n.querySelector("img"),r=s?s.cloneNode(!1):document.createElement("div");return i.appendChild(r),r})}transition(t){this.#t.forEach((e,i)=>{e.classList.toggle(ot,i===t)})}};var F="navigation",R="active",at="touch";var M=class{#t;#e;constructor(t,e,i,n=!0){let s=t.querySelector("."+F);!s&&n&&(s=document.createElement("div"),s.classList.add(F),t.appendChild(s)),s&&(this.#t=[()=>i(-1,-1),()=>i(-1,1)],this.#e=this.createButtons(s),s.addEventListener("mouseenter",()=>this.setActive(!t.classList.contains(at))),s.addEventListener("mouseleave",()=>this.setActive(!1)),this.initializeFlick(t,e/2))}createButtons(t){let e=Array.from(t.querySelectorAll(":scope > button"));if(e.length!==2){let i=document.createElement("button"),n=document.createElement("button");t.appendChild(i),t.appendChild(n),e=[i,n]}return e.forEach((i,n)=>{i.classList.add(F),i.addEventListener("click",()=>this.doClick(n))}),e}doClick(t){this.#t[t]?.()}setActive(t){for(let e of this.#e)e.classList.toggle(R,t)}initializeFlick(t,e){let i=[0,0],n=null;t.addEventListener("touchstart",r=>{r.touches.length===1?n=r.touches[0]?.pageX??null:n=null},{passive:!0}),t.addEventListener("touchmove",r=>{if(n===null||r.touches.length!==1)return;let a=this.getFlickDir(n,r.touches[0]);if(a!==-1){r.cancelable&&r.preventDefault(),this.#t[a]?.();let l=this.#e[a];l&&(clearTimeout(i[a]),l.classList.add(R),i[a]=setTimeout(()=>l.classList.remove(R),e)),n=null}},{passive:!1});let s=()=>{n=null};t.addEventListener("touchend",s,{passive:!0}),t.addEventListener("touchcancel",s,{passive:!0})}getFlickDir(t,e){if(t===null||!e)return-1;let i=e.pageX;return t+32<i?0:i<t-32?1:-1}};var K="pagination",lt="visible",I=class{#t=[];constructor(t,e,i,n=!0){let s=t.querySelector("."+K);if(!s&&n&&(s=document.createElement("div"),s.classList.add(K),t.appendChild(s)),!s)return;let r=s.querySelector(":scope > ol")??s.appendChild(document.createElement("ol")),a=e===2?1:0;for(let l=0;l<e;l+=1)r.appendChild(this.createBullet(i,l,a))}createBullet(t,e,i){let n=document.createElement("li");return n.addEventListener("click",()=>t(e,i)),this.#t.push(n),n}transition(t){this.#t.forEach((e,i)=>{e.classList.toggle(lt,i===t)})}};var mt="slide-count",ct="slide-index",y=class{#t=[];constructor(t,e){let i=Array.from(t.querySelectorAll("."+mt));for(let n of i)n.innerHTML=`${e}`;this.#t=Array.from(t.querySelectorAll("."+ct));for(let n of this.#t)n.innerHTML="1"}transition(t){for(let e of this.#t)e.innerHTML=`${t+1}`}};var J="selector",ut="visible",C=class{#t=[];constructor(t,e,i,n,s=!0){let r=t.querySelector("."+J);if(!r&&s&&(r=document.createElement("div"),r.classList.add(J),t.appendChild(r)),!r)return;let a=r.querySelector(":scope > ol")??r.appendChild(document.createElement("ol")),l=i===2?1:0;for(let p=0;p<i;p+=1)a.appendChild(this.createThumbnail(e[p],n,p,l))}createThumbnail(t,e,i,n){let s=document.createElement("li"),r=t.querySelector("img"),a=r?r.cloneNode(!1):document.createElement("div");return s.appendChild(a),s.addEventListener("click",()=>e(i,n)),this.#t.push(s),s}transition(t){this.#t.forEach((e,i)=>{e.classList.toggle(ut,i===t)})}};var Z="caption",f="subtitle",V="circle",q="line",k="custom",dt="state",_=class o{static create(t){let e=t.querySelector(":scope > div, :scope > a > div");return e?new o(e):null}#t;#e=f;constructor(t){this.#t=t,t.classList.contains(Z)||t.classList.add(Z),!t.classList.contains(q)&&!t.classList.contains(V)&&!t.classList.contains(k)&&t.classList.add(f),t.classList.contains(q)&&(this.#e=q),t.classList.contains(V)&&(this.#e=V),t.classList.contains(f)&&(this.#e=f),t.classList.contains(k)&&(this.#e=k),this.wrap(t);for(let e of t.querySelectorAll(":scope > div"))this.wrapWithSpan(e)}wrap(t){let e=[];for(let i of Array.from(t.childNodes))Node.ELEMENT_NODE===i.nodeType?i.tagName==="DIV"?this.wrapAndReplaceNodes(t,e,i):i.tagName==="BR"?(this.wrapAndReplaceNodes(t,e,i),t.removeChild(i)):e.push(i):(i.nodeValue?.trim()??"").length&&e.push(i);this.wrapAndReplaceNodes(t,e,null)}wrapAndReplaceNodes(t,e,i){if(e.length){let n=document.createElement("div");for(let s of e)n.appendChild(t.removeChild(s));t.insertBefore(n,i),e.length=0}}wrapWithSpan(t){let e=document.createElement("span");for(let i of Array.from(t.childNodes))e.appendChild(t.removeChild(i));e.innerHTML=e.innerHTML.trim(),t.appendChild(e)}onStateChanged(t,e){this.#t.dataset[dt]=t}onResize(){let t=window.innerWidth<600;this.#t.classList.remove(t?this.#e:f),this.#t.classList.add(t?f:this.#e)}};var j="image",Q="video",U="scroll",tt="dual",ht="state",b=class{base;constructor(t){this.base=document.createElement("div");let e=t.querySelector("a")??t;e.insertBefore(this.base,e.firstChild)}onStateChanged(t,e){this.base.dataset[ht]=t}getDuration(t,e,i){return t}};var H=class extends b{#t;constructor(t){super(t),this.base.classList.add(j),t.classList.contains(U)&&this.base.classList.add(U);let[e,i]=Array.from(t.querySelectorAll(":scope > img, :scope > a > img")),n=[];e&&(this.base.appendChild(e),n.push(e),i&&(this.base.classList.add(tt),this.base.appendChild(i),n.push(i))),this.#t=n.length?X(n):Promise.resolve(!1)}isLoaded(){return this.#t}getDuration(t,e,i=0){return i?t*(1+.01*i*(1-Math.random()*2)):t}};var x=class extends b{#t;#e;constructor(t,e){super(t),this.base.classList.add(Q);let[i]=Array.from(t.querySelectorAll(":scope > video, :scope > a > video"));i?(i.muted=!0,i.playsInline=!0,e===1&&(i.loop=!0),this.#t=i,this.base.appendChild(i),this.#e=z([i])):this.#e=Promise.resolve(!1)}isLoaded(){return this.#e}onStateChanged(t,e){super.onStateChanged(t,e),this.#t&&(e===""&&(t==="in"||t==="display")&&this.#t.paused&&(this.#t.autoplay=!0,this.#t.play()),e==="out"&&t===""&&!this.#t.paused&&(this.#t.pause(),this.#t.currentTime=0))}getDuration(t,e,i){return this.#t?this.#t.duration*1e3-e*2:0}};var et="state",A=class{#t;#e;#n;#i;constructor(t,e,i){this.#t=t,this.#e=e,this.#i=_.create(t);let n=t.querySelector(":scope > video, :scope > a > video");this.#n=n?new x(t,i):new H(t)}getBase(){return this.#t}getIndex(){return this.#e}setState(t){let e=this.#t.dataset?.[et]??"";e!==t&&(this.#t.dataset[et]=t,this.#n.onStateChanged(t,e),this.#i?.onStateChanged(t,e))}onResize(){this.#i?.onResize()}isLoaded(){return this.#n.isLoaded()}getDuration(t,e,i){return this.#n.getDuration(t,e,i)}};var L="display",v="in",g="out",P="--m",E="--v",c=class{};var w=class extends c{#t;#e;#n=0;#i=0;#o=1;#m=2;constructor(t,e){super(),this.#e=e;let i=Math.floor(t.length/2);this.#t=t.map((n,s)=>({s:t[d(s-i,t.length)],m:s-i,v:0})),this.update(),m((n,s)=>this.step(s))}update(){for(let t of this.#t)t.s.getBase().style.setProperty(P,`${(t.m*100).toFixed(2)}%`),t.s.getBase().style.setProperty(E,`${(t.v*100).toFixed(2)}%`)}transition(t,e){this.#n=t;let i=this.getCurrent(),n=Number.MAX_VALUE,s=null;if(0<=e)for(let r=0;r<this.#t.length;r+=1){let a=this.#t[d(r+i,this.#t.length)];a.s.getIndex()===t&&(e===0||0<a.m)&&Math.abs(a.m)<n&&(n=Math.abs(a.m),s=a)}else for(let r=this.#t.length-1;0<=r;r-=1){let a=this.#t[d(r+i,this.#t.length)];a.s.getIndex()===t&&a.m<0&&Math.abs(a.m)<n&&(n=Math.abs(a.m),s=a)}if(!s)for(let r=0;r<this.#t.length;r+=1){let a=this.#t[d(r+i,this.#t.length)];a.s.getIndex()===t&&Math.abs(a.m)<n&&(n=Math.abs(a.m),s=a)}s?(this.#i=s.m,this.#o=Math.pow(Math.max(1,Math.abs(this.#i)),2)):(this.#i=0,this.#o=1)}isTransitioning(){return this.#i!==0}getCurrent(){let t=Number.MAX_VALUE,e=0;for(let i=0;i<this.#t.length;i+=1){let n=this.#t[i];Math.abs(n.m)<t&&(t=Math.abs(n.m),e=i)}return e}step(t){let e=this.#o*t/this.#e;Math.abs(this.#i)<.1&&(e*=Math.sin(Math.abs(this.#i)*10*(Math.PI/2))/this.#o);let i=Math.sign(this.#i)*Math.min(e,Math.abs(this.#i));this.#i-=i;for(let a of this.#t)a.m-=i;let n=this.#t[0],s=this.#t[this.#t.length-1];if(i<0&&this.#m+.5<s.m){let a=this.#t.pop();a.m=n.m-1,this.#t.unshift(a)}else if(0<i&&n.m<-(this.#m+.5)){let a=this.#t.shift();a.m=s.m+1,this.#t.push(a)}if(Math.abs(this.#i)<.001){for(let a of this.#t)a.m=Math.round(a.m-this.#i);this.#i=0}let r=this.#t[0]?.s.getBase().parentElement;if(r){for(let a of this.#t){let l=h(pt(a.s.getBase(),r)),p=a.s.getIndex()===this.#n;a.s.setState(this.getState(p,l)),a.v=l}this.update()}}getState(t,e){return t&&e===1?L:0<e&&e<1?t?v:g:""}};function pt(o,t){let e=o.getBoundingClientRect(),i=t.getBoundingClientRect(),n=Math.max(e.left,i.left),s=Math.min(e.right,i.right);return 0<e.width?Math.max(0,s-n)/e.width:0}var N=class extends c{#t;#e;#n=0;#i=!1;constructor(t,e){super(),this.#t=e,this.#e=t.map((i,n)=>({s:i,m:n===0?0:1,v:0})),this.update(),m((i,n)=>this.step(n))}update(){for(let t of this.#e)t.s.getBase().style.setProperty(P,`${(t.m*100).toFixed(2)}%`),t.s.getBase().style.setProperty(E,`${(t.v*100).toFixed(2)}%`)}transition(t,e){this.#n=t,this.#i=!0}isTransitioning(){return this.#i?!0:this.#e.some(t=>t.s.getIndex()<=this.#n&&0<t.m||t.s.getIndex()>this.#n&&t.m<1)}step(t){this.#i=!1;let e=t/this.#t;for(let s of this.#e){let r=e;this.#n===s.s.getIndex()&&Math.abs(s.m)<.1&&(r=e*Math.sin(Math.abs(s.m)*10*(Math.PI/2))),this.#n!==s.s.getIndex()&&Math.abs(s.m)>.9&&(r=e*Math.sin(Math.abs(1-s.m)*10*(Math.PI/2))),s.s.getIndex()<=this.#n?s.m=Math.max(0,s.m-r):s.m=Math.min(1,s.m+r),s.m=h(s.m)}let i=!1,n=0;for(let s=this.#e.length-1;0<=s;s-=1){let r=this.#e[s];0<r.m&&r.m<1&&(i=!0);let a=r.s.getIndex()===this.#n;r.s.setState(this.getState(a,r.m,i));let l=1-r.m;n<l?(r.v=h(l-n),n=l):r.v=0}this.update()}getState(t,e,i){return i?t?v:g:t&&e===0?L:""}};var B=class extends c{#t;#e;#n=0;#i=!1;constructor(t,e){super(),this.#t=e,this.#e=t.map((i,n)=>({s:i,m:0,v:n===0?1:0})),this.update(),m((i,n)=>this.step(n))}update(){for(let t of this.#e)t.s.getBase().style.setProperty(E,`${(t.v*100).toFixed(2)}%`)}transition(t,e){this.#n=t,this.#i=!0}isTransitioning(){return this.#i?!0:this.#e.some(t=>t.s.getIndex()===this.#n&&t.v<1||t.s.getIndex()!==this.#n&&0<t.v)}step(t){this.#i=!1;let e=t/this.#t;for(let i of this.#e){let n=i.s.getIndex()===this.#n;n?i.v=Math.min(1,i.v+e):i.v=Math.max(0,i.v-e),i.v=h(i.v),i.s.setState(this.getState(n,i.v))}this.update()}getState(t,e){return e===1?L:0<e?t?v:g:""}};var ft="slider-simplex",bt="slides",Lt="start",it="view",vt="pause",nt="scroll",gt="--effect-type",Et="--duration-time",Tt="--transition-time",St="--randomize-timing",Mt="--random-rate",It="--show-background",yt="--show-side-slide",Ct="--create-navigation",_t="--create-pagination",Ht="--create-selector",xt="--view-offset",st=class o{static create(t){if(t){let e=document.getElementById(t);if(e)return new o(e)}else for(let e of document.getElementsByClassName(ft))new o(e);return null}#t;#e;#n;#i;#o;#m;#h;#p;#f;#b;#r=[];#s=0;#a=[];#c;#L=null;#v=null;#g=null;#E=null;#T=null;#l=0;#u=0;#d=!1;constructor(t){this.#t=t,this.#e=W(this.#t,gt,"fade"),this.#n=D(this.#t,Et,8e3),this.#i=D(this.#t,Tt,1e3);let e=u(this.#t,St,null);this.#o=e===!1?0:O(t,Mt,e===!0?10:0),this.#m=u(this.#t,It,!1),this.#h=u(this.#t,yt,!1),this.#p=u(this.#t,Ct),this.#f=u(this.#t,_t),this.#b=u(this.#t,Ht);let i=O(this.#t,xt,100),n=this.#t.querySelector("."+bt);if(!n){console.error(`Slider Simplex (#${this.#t.id}): no slides`);return}if(this.#r=Array.from(n.getElementsByTagName("li")),this.#s=this.#r.length,this.#s===0){console.error(`Slider Simplex (#${this.#t.id}): no list items`);return}for(let s of this.#r)s.dataset.effectType=s.dataset.effectType??this.#e;this.#m&&(this.#T=new S(this.#t,this.#r)),this.#h&&(n.dataset.showSideSlide="true"),this.initSlides(),Y(this.#t),G(this.#t,it,i),$(()=>this.start())}getController(){return{move:t=>this.transition(t,this.#s===2?1:0),next:()=>this.transition(this.#l===this.#s-1?0:this.#l+1,1),prev:()=>this.transition(this.#l===0?this.#s-1:this.#l-1,-1),onTransitionEnd:t=>{this.#L=t}}}initSlides(){this.#e==="scroll"&&1<this.#s&&this.#s<5&&(this.cloneLis(),this.#s===2&&this.cloneLis());let t=this.#t.classList.contains(nt);switch(this.#a=this.#r.map((i,n)=>(t&&i.classList.add(nt),new A(i,n%this.#s,this.#s))),new ResizeObserver(()=>{for(let i of this.#a)i.onResize()}).observe(this.#t),this.#e){default:case"fade":this.#c=new B(this.#a,this.#i);break;case"slide":this.#c=new N(this.#a,this.#i);break;case"scroll":this.#c=new w(this.#a,this.#i);break}}cloneLis(){for(let t=0;t<this.#s;t+=1){let e=this.#r[t],i=e.cloneNode(!0);this.#r.push(i),e.parentNode?.appendChild(i)}}async start(){if(1<this.#s){let e=(i,n)=>this.transition(i,n);new M(this.#t,this.#i,e,this.#p),this.#E=new I(this.#t,this.#s,e,this.#f),this.#v=new C(this.#t,this.#r,this.#s,e,this.#b)}this.#g=new y(this.#t,this.#s),(await Promise.all(this.#a.map(e=>e.isLoaded()))).every(e=>e===!0)?(this.transition(0,0),setTimeout(()=>{this.#t.classList.add(Lt),m((e,i)=>this.step())},200),console.log(`Slider Simplex (#${this.#t.id}): successfully started`)):console.log(`Slider Simplex (#${this.#t.id}): failed to load media`)}transition(t,e){if(t===-1&&(t=d(this.#l+e,this.#s)),this.#T?.transition(t),this.#E?.transition(t),this.#g?.transition(t),this.#v?.transition(t),this.#c.transition(t,e),this.#l=t,this.#d=!0,1<this.#s){let i=this.#a[t]?.getDuration(this.#n,this.#i,this.#o)??this.#n;this.#u=window.performance.now()+i}}step(){if(this.#d&&!this.#c.isTransitioning()&&(this.#L?.(),this.#d=!1),!(window.performance.now()<this.#u)){if(!this.#t.classList.contains(it)||this.#t.classList.contains(vt)){this.#u=window.performance.now()+100;return}this.#u=Number.MAX_VALUE,this.transition(-1,1)}}};})();
//# sourceMappingURL=slider-simplex.min.js.map
