"use strict";(()=>{function c(o,t,e=!1){let i=w(o,t);if(!i.length)return e;if(typeof i!="string")return!!i;try{return JSON.parse(i.toLowerCase())===!0}catch{return i.length!==0}}function u(o,t,e=0){let i=w(o,t);return i.length?parseFloat(i):e}function q(o,t,e=""){let i=w(o,t);return i.length?typeof i=="string"?i:String(i):e}function w(o,t){let e=getComputedStyle(o).getPropertyValue(t).trim();return(e.at(0)==='"'&&e.at(-1)==='"'||e.at(0)==="'"&&e.at(-1)==="'")&&(e=e.slice(1,-1)),e}function h(o,t){return t<=o?o-t:o<0?t+o:o}function p(o,t=1e-4){return o<t?0:1-t<o?1:o}function k(o){0<navigator.maxTouchPoints&&o.addEventListener("pointerenter",t=>{let e=t.pointerType!=="mouse";o.classList[e?"add":"remove"]("touch")})}function d(o){let t=0,e=i=>{t!==0&&o(i,i-t),t=i,window.requestAnimationFrame(e)};window.requestAnimationFrame(e)}function U(o){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",o):setTimeout(o,0)}function W(o,t,e){new IntersectionObserver(s=>{for(let r of s)o.classList[r.isIntersecting?"add":"remove"](t)},{rootMargin:`${e}px 0px`}).observe(o),document.addEventListener("visibilitychange",()=>{if(document.visibilityState!=="hidden"){let r=o.getBoundingClientRect(),n=window.innerHeight;(0<r.top&&r.top<n||0<r.bottom&&r.bottom<n)&&o.classList.add(t)}else o.classList.remove(t)})}function X(o){return Promise.all(o.map(t=>t.complete&&t.naturalWidth!==0?Promise.resolve():new Promise((e,i)=>{t.addEventListener("load",()=>e(),{once:!0}),t.addEventListener("error",()=>i(new Error("Image failed to load")),{once:!0})}))).then(()=>!0,()=>!1)}function z(o){return Promise.all(o.map(t=>t.readyState>=1?Promise.resolve():new Promise((e,i)=>{t.addEventListener("loadedmetadata",()=>e(),{once:!0}),t.addEventListener("error",()=>i(new Error("Video failed to load metadata")),{once:!0})}))).then(()=>!0,()=>!1)}var rt="background",G="visible",L=class{#t=[];constructor(t,e){let i=document.createElement("div");i.classList.add(rt),t.insertBefore(i,t.firstChild);for(let s of e){let r,n=s.querySelector("img");n?r=n.cloneNode(!1):r=document.createElement("div"),i.appendChild(r),this.#t.push(r)}}transition(t){for(let e of this.#t)e.classList.remove(G);this.#t[t]&&this.#t[t].classList.add(G)}};var P="navigation",v="active";var E=class{#t;#e;constructor(t,e,i,s=!0){let r=t.querySelector("."+P);!r&&s&&(r=document.createElement("div"),r.classList.add(P),t.appendChild(r)),r&&(this.#t=[()=>i(-1,-1),()=>i(-1,1)],this.#e=this.createButtons(r),r.addEventListener("mouseenter",()=>this.setActive(!t.classList.contains("touch"))),r.addEventListener("mouseleave",()=>this.setActive(!1)),this.initializeFlick(t,e*1e3/2))}createButtons(t){let e=t.querySelectorAll(":scope > button");if(e.length!==2){let i=document.createElement("button"),s=document.createElement("button");t.appendChild(i),t.appendChild(s),e=[i,s]}for(let i=0;i<2;i+=1)e[i].classList.add(P),e[i].addEventListener("click",()=>this.doClick(i));return e}doClick(t){this.#t[t]()}setActive(t){this.#e[0].classList[t?"add":"remove"](v),this.#e[1].classList[t?"add":"remove"](v)}initializeFlick(t,e){let i=[0,0],s=Number.NaN;t.addEventListener("touchstart",r=>{s=r.touches[0].pageX}),t.addEventListener("touchmove",r=>{let n=this.getFlickDir(s,r);n!==-1&&(r.cancelable===!0&&r.preventDefault(),this.#t[n](),this.#e[n]&&(clearTimeout(i[n]),this.#e[n].classList.add(v),i[n]=setTimeout(()=>this.#e[n].classList.remove(v),e)),s=Number.NaN)}),t.addEventListener("touchend",()=>{s=Number.NaN})}getFlickDir(t,e){if(Number.isNaN(t))return-1;let i=e.changedTouches[0].pageX;return t+32<i?0:i<t-32?1:-1}};var $="pagination",K="visible",T=class{#t=[];constructor(t,e,i,s=!0){let r=t.querySelector("."+$);if(!r&&s&&(r=document.createElement("div"),r.classList.add($),t.appendChild(r)),!r)return;let n=this.createElement(r),a=e===2?1:0;for(let l=0;l<e;l+=1)n.appendChild(this.createBullet(i,l,a))}createElement(t){let e=t.querySelector(":scope > ol");return e||(e=document.createElement("ol"),t.appendChild(e)),e}createBullet(t,e,i){let s=document.createElement("li");return s.addEventListener("click",()=>t(e,i)),this.#t.push(s),s}transition(t){for(let e of this.#t)e.classList.remove(K);this.#t[t]&&this.#t[t].classList.add(K)}};var ot="slide-count",at="slide-index",g=class{#t=[];constructor(t,e){let i=t.querySelectorAll("."+ot);for(let s of i)s.innerHTML=""+e;this.#t=t.querySelectorAll("."+at);for(let s of this.#t)s.innerHTML="1"}transition(t){for(let e of this.#t)e.innerHTML=""+(t+1)}};var Y="selector",J="visible",M=class{#t=[];constructor(t,e,i,s,r=!0){let n=t.querySelector("."+Y);if(!n&&r&&(n=document.createElement("div"),n.classList.add(Y),t.appendChild(n)),!n)return;let a=this.createElement(n),l=i===2?1:0;for(let m=0;m<i;m+=1)a.appendChild(this.createThumbnail(e[m],s,m,l))}createElement(t){let e=t.querySelector(":scope > ol");return e||(e=document.createElement("ol"),t.appendChild(e)),e}createThumbnail(t,e,i,s){let r=document.createElement("li"),n,a=t.querySelector("img");return a?n=a.cloneNode(!1):n=document.createElement("div"),r.appendChild(n),r.addEventListener("click",()=>e(i,s)),this.#t.push(r),r}transition(t){for(let e of this.#t)e.classList.remove(J);this.#t[t]&&this.#t[t].classList.add(J)}};var Z="caption",f="subtitle",N="circle",D="line",F="custom",lt="state",S=class o{static create(t){let e=t.querySelector(":scope > div, :scope > a > div");return e?new o(e):null}#t;#e=f;constructor(t){this.#t=t,t.classList.contains(Z)||t.classList.add(Z),!t.classList.contains(D)&&!t.classList.contains(N)&&!t.classList.contains(F)&&t.classList.add(f),t.classList.contains(D)&&(this.#e=D),t.classList.contains(N)&&(this.#e=N),t.classList.contains(f)&&(this.#e=f),t.classList.contains(F)&&(this.#e=F),this.wrap(t);for(let e of t.querySelectorAll(":scope > div"))this.wrapWithSpan(e)}wrap(t){let e=[];for(let i of Array.from(t.childNodes))i.nodeType===1?i.tagName==="DIV"?this.wrapAndReplaceNodes(t,e,i):i.tagName==="BR"?(this.wrapAndReplaceNodes(t,e,i),t.removeChild(i)):e.push(i):(i.nodeValue?.trim()??"").length&&e.push(i);this.wrapAndReplaceNodes(t,e,null)}wrapAndReplaceNodes(t,e,i){if(e.length){let s=document.createElement("div");for(let r of e)s.appendChild(t.removeChild(r));t.insertBefore(s,i),e.length=0}}wrapWithSpan(t){let e=document.createElement("span");for(let i of Array.from(t.childNodes))e.appendChild(t.removeChild(i));e.innerHTML=e.innerHTML.trim(),t.appendChild(e)}onStateChanged(t,e){this.#t.dataset[lt]=t}onResize(){window.innerWidth<600?(this.#t.classList.remove(this.#e),this.#t.classList.add(f)):(this.#t.classList.remove(f),this.#t.classList.add(this.#e))}};var mt="image",ct="video",j="scroll",ut="dual",ht="state",I=class{base;constructor(t){this.base=document.createElement("div");let e=t.querySelector("a")??t;e.insertBefore(this.base,e.firstChild)}onStateChanged(t,e){this.base.dataset[ht]=t}getDuration(t,e,i){return t}},H=class extends I{#t=null;constructor(t){super(t),this.base.classList.add(mt),t.classList.contains(j)&&this.base.classList.add(j);let e=Array.from(t.querySelectorAll(":scope > img, :scope > a > img"));e.length&&(this.base.appendChild(e[0]),1<e.length&&(this.base.classList.add(ut),this.base.appendChild(e[1])),this.#t=X(e))}async isLoaded(){return this.#t?this.#t:!1}getDuration(t,e,i=0){if(i){let s=1+.01*i*(1-Math.random()*2);return t*s}return t}},C=class extends I{#t;#e=null;constructor(t,e){super(t),this.base.classList.add(ct);let i=Array.from(t.querySelectorAll(":scope > video, :scope > a > video"));if(i.length===1){let s=i[0];s.muted=!0,s.playsInline=!0,e===1&&(s.loop=!0),this.#t=s,this.base.appendChild(s),this.#e=z([s])}}async isLoaded(){return this.#e?this.#e:!1}onStateChanged(t,e){super.onStateChanged(t,e),e===""&&(t==="in"||t==="display")&&this.#t.paused&&(this.#t.autoplay=!0,this.#t.play()),e==="out"&&t===""&&(this.#t.paused||(this.#t.pause(),this.#t.currentTime=0))}getDuration(t,e,i){return this.#t.duration-e*2}};var Q="state",y=class{#t;#e;#i;#n;constructor(t,e,i){this.#t=t,this.#e=e,this.#n=S.create(t),t.querySelector(":scope > video, :scope > a > video")?this.#i=new C(t,i):this.#i=new H(t)}getBase(){return this.#t}getIndex(){return this.#e}setState(t){let e=this.#t.dataset?.[Q]??"";e!==t&&(this.#t.dataset[Q]=t,this.#i.onStateChanged(t,e),this.#n&&this.#n.onStateChanged(t,e))}onResize(){this.#n&&this.#n.onResize()}isLoaded(){return this.#i.isLoaded()}getDuration(t,e,i){return this.#i.getDuration(t,e,i)}};var B="display",R="in",O="out",tt="--m",V="--v",b=class{},_=class extends b{#t;#e=0;#i=!1;constructor(t,e){super(),this.#t=this.createItems(t),this.update(),d((i,s)=>this.step(s,e))}createItems(t){let e=[];for(let i=0;i<t.length;i+=1)e.push({s:t[i],m:0,v:i===0?1:0});return e}update(){for(let t of this.#t)t.s.getBase().style.setProperty(V,`${(t.v*100).toFixed(2)}%`)}transition(t,e){this.#e=t,this.#i=!0}isTransitioning(){if(this.#i)return!0;for(let t of this.#t)if(t.s.getIndex()===this.#e){if(t.v<1)return!0}else if(0<t.v)return!0;return!1}step(t,e){this.#i=!1;let i=t/(e*1e3);for(let s of this.#t){let r=s.s.getIndex()===this.#e;r?s.v=Math.min(1,s.v+i):s.v=Math.max(0,s.v-i),s.v=p(s.v),s.s.setState(this.getState(r,s.v))}this.update()}getState(t,e){return t&&0<e&&e<1?R:!t&&0<e&&e<1?O:e===1?B:""}},A=class extends b{#t;#e=0;#i=!1;constructor(t,e){super(),this.#t=this.createItems(t),this.update(),d((i,s)=>this.step(s,e))}createItems(t){let e=[];for(let i=0;i<t.length;i+=1)e.push({s:t[i],m:i===0?0:1,v:0});return e}update(){for(let t of this.#t)t.s.getBase().style.setProperty(tt,`${(t.m*100).toFixed(2)}%`),t.s.getBase().style.setProperty(V,`${(t.v*100).toFixed(2)}%`)}transition(t,e){this.#e=t,this.#i=!0}isTransitioning(){if(this.#i)return!0;for(let t of this.#t)if(t.s.getIndex()<=this.#e){if(0<t.m)return!0}else if(t.m<1)return!0;return!1}step(t,e){this.#i=!1;let i=t/(e*1e3);for(let n of this.#t){let a=i;this.#e===n.s.getIndex()&&Math.abs(n.m)<.1&&(a=i*Math.sin(Math.abs(n.m)*10*(Math.PI/2))),this.#e!==n.s.getIndex()&&Math.abs(n.m)>.9&&(a=i*Math.sin(Math.abs(1-n.m)*10*(Math.PI/2))),n.s.getIndex()<=this.#e?n.m=Math.max(0,n.m-a):n.m=Math.min(1,n.m+a),n.m=p(n.m)}let s=!1,r=0;for(let n=this.#t.length-1;0<=n;n-=1){let a=this.#t[n];0<a.m&&a.m<1&&(s=!0);let l=a.s.getIndex()===this.#e;a.s.setState(this.getState(l,a.m,s));let m=1-a.m;r<m?(a.v=p(m-r),r=m):a.v=0}this.update()}getState(t,e,i){return t&&i?R:!t&&i?O:t&&!i&&e===0?B:""}},x=class extends b{#t;#e=0;#i=0;#n=0;#o=2;constructor(t,e){super(),this.#t=this.createItems(t),this.update(),d((i,s)=>this.step(s,e))}createItems(t){let e=[],i=Math.floor(t.length/2);for(let s=0;s<t.length;s+=1)e.push({s:t.at(s-i),m:s-i,v:0});return e}update(){for(let t of this.#t)t.s.getBase().style.setProperty(tt,`${(t.m*100).toFixed(2)}%`),t.s.getBase().style.setProperty(V,`${(t.v*100).toFixed(2)}%`)}transition(t,e){this.#e=t;let i=this.getCurrent(),s=Number.MAX_VALUE,r=null;if(0<=e)for(let n=0;n<this.#t.length;n+=1){let a=this.#t.at(h(n+i,this.#t.length));a.s.getIndex()===t&&(e===0||0<a.m)&&Math.abs(a.m)<s&&(s=Math.abs(a.m),r=a)}else if(e<0)for(let n=this.#t.length-1;0<=n;n-=1){let a=this.#t.at(h(n+i,this.#t.length));a.s.getIndex()===t&&a.m<0&&Math.abs(a.m)<s&&(s=Math.abs(a.m),r=a)}if(!r)for(let n=0;n<this.#t.length;n+=1){let a=this.#t.at(h(n+i,this.#t.length));a.s.getIndex()===t&&Math.abs(a.m)<s&&(s=Math.abs(a.m),r=a)}r&&(this.#i=r.m,this.#n=Math.pow(Math.max(1,Math.abs(this.#i)),2))}isTransitioning(){return this.#i!==0}getCurrent(){let t=Number.MAX_VALUE,e=0;for(let i=0;i<this.#t.length;i+=1){let s=this.#t.at(i);Math.abs(s.m)<t&&(t=Math.abs(s.m),e=i)}return e}step(t,e){let i=this.#n*t/(e*1e3);Math.abs(this.#i)<.1&&(i*=Math.sin(Math.abs(this.#i)*10*(Math.PI/2)));let s=Math.abs(this.#i)<i;if(this.#i<0){i=Math.min(i,-this.#i),this.#i+=i;for(let n of this.#t)n.m+=i;if(this.#o+.5<this.#t.at(-1).m){let n=this.#t.pop();n.m=this.#t.at(0).m-1,this.#t.unshift(n)}}else if(0<this.#i){i=Math.min(i,this.#i),this.#i-=i;for(let n of this.#t)n.m-=i;if(this.#t.at(0).m<-(this.#o+.5)){let n=this.#t.shift();n.m=this.#t.at(-1).m+1,this.#t.push(n)}}if(s){this.#i=0;for(let n of this.#t)n.m=Math.round(n.m)}let r=this.#t[0].s.getBase().parentElement;for(let n of this.#t){let a=p(dt(n.s.getBase(),r)),l=n.s.getIndex()===this.#e;n.s.setState(this.getState(l,a)),n.v=a}this.update()}getState(t,e){return t&&0<e&&e<1?R:!t&&0<e&&e<1?O:t&&e===1?B:""}};function dt(o,t){let e=o.getBoundingClientRect(),i=t.getBoundingClientRect(),s=Math.max(e.left,i.left),r=Math.min(e.right,i.right);return Math.max(0,r-s)/e.width}var ft="slider-simplex",pt="slides",bt="start",et="view",Lt="pause",it="scroll",vt="--effect-type",Et="--duration-time",Tt="--transition-time",gt="--randomize-timing",st="--random-rate",Mt="--show-background",St="--show-side-slide",It="--create-navigation",Ht="--create-pagination",Ct="--create-selector",yt="--view-offset",nt=class o{static create(t){if(t){let e=document.getElementById(t);if(e)return new o(e)}else for(let e of document.getElementsByClassName(ft))new o(e);return null}#t;#e;#i;#n;#o;#L;#v;#E;#T;#g;#r;#s;#a=[];#m;#c=null;#u=null;#h=null;#d=null;#f=null;#l=0;#p=0;#b=!1;constructor(t){this.#t=t,this.#e=q(this.#t,vt,"fade"),this.#i=u(this.#t,Et,8),this.#n=u(this.#t,Tt,1);let e=c(this.#t,gt,null);e?this.#o=u(this.#t,st,10):e===null?this.#o=u(this.#t,st,0):this.#o=0,this.#L=c(this.#t,Mt,!1),this.#v=c(this.#t,St,!1),this.#E=c(this.#t,It),this.#T=c(this.#t,Ht),this.#g=c(this.#t,Ct);let i=u(this.#t,yt,100),s=this.#t.querySelector("."+pt);this.#r=Array.from(s.getElementsByTagName("li")),this.#s=this.#r.length;for(let r of this.#r)r.dataset.effectType=r.dataset.effectType??this.#e;this.#L&&(this.#f=new L(this.#t,this.#r)),this.#v&&(s.dataset.showSideSlide="true"),this.initSlides(),k(this.#t),W(this.#t,et,i),U(async()=>this.start())}getController(){return{move:e=>this.transition(e,this.#s===2?1:0),next:()=>this.transition(this.#l===this.#s-1?0:this.#l+1,1),prev:()=>this.transition(this.#l===0?this.#s-1:this.#l-1,-1),onTransitionEnd:e=>{this.#c=e}}}initSlides(){this.#e==="scroll"&&1<this.#s&&this.#s<5&&(this.cloneLis(),this.#s===2&&this.cloneLis());let t=this.#t.classList.contains(it);for(let i=0;i<this.#r.length;i+=1){let s=this.#r[i];t&&s.classList.add(it);let r=new y(s,i%this.#s,this.#s);this.#a.push(r)}switch(new ResizeObserver(()=>{for(let i of this.#a)i.onResize()}).observe(this.#t),this.#e){default:case"fade":this.#m=new _(this.#a,this.#n);break;case"slide":this.#m=new A(this.#a,this.#n);break;case"scroll":this.#m=new x(this.#a,this.#n);break}}cloneLis(){for(let t=0;t<this.#s;t+=1){let e=this.#r[t],i=this.#r[t].cloneNode(!0);this.#r.push(i),e.parentNode?.appendChild(i)}}async start(){if(1<this.#s){let e=(i,s)=>this.transition(i,s);new E(this.#t,this.#n,e,this.#E),this.#d=new T(this.#t,this.#s,e,this.#T),this.#u=new M(this.#t,this.#r,this.#s,e,this.#g)}this.#h=new g(this.#t,this.#s),(await Promise.all(this.#a.map(e=>e.isLoaded()))).every(e=>e===!0)?(this.transition(0,0),setTimeout(()=>{this.#t.classList.add(bt),d((e,i)=>this.step())},200),console.log(`Slider Simplex (#${this.#t.id}): successfully started`)):console.log(`Slider Simplex (#${this.#t.id}): failed to load media`)}transition(t,e){if(t===-1&&(t=h(this.#l+e,this.#s)),this.#f&&this.#f.transition(t),this.#d&&this.#d.transition(t),this.#h&&this.#h.transition(t),this.#u&&this.#u.transition(t),this.#m.transition(t,e),this.#l=t,this.#b=!0,1<this.#s){let i=this.#a[t].getDuration(this.#i,this.#n,this.#o);this.#p=window.performance.now()+i*1e3}}step(){this.#b&&!this.#m.isTransitioning()&&(this.#c&&this.#c(),this.#b=!1),!(window.performance.now()<this.#p)&&(!this.#t.classList.contains(et)||this.#t.classList.contains(Lt)||(this.#p=Number.MAX_VALUE,this.transition(-1,1)))}};})();
//# sourceMappingURL=slider-simplex.min.js.map
