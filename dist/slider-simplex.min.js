"use strict";import{getStylePropertyBool as e,getStylePropertyFloat as o,getStylePropertyString as l}from"./custom-property";import{detectTouch as c,repeatAnimationFrame as m,initializeViewportDetection as d,callAfterDocumentReady as f,wrapAround as u}from"./common";import{Background as T}from"./part-background.js";import{Navigation as p}from"./part-navigation";import{Pagination as S}from"./part-pagination";import{Indicator as E}from"./part-indicator";import{Selector as g}from"./part-selector.js";import{Slide as L}from"./slide";import{TransitionFade as b,TransitionSlide as v,TransitionScroll as w}from"./transition";const _="slider-simplex",C="slides",I="start",r="view",A="pause",h="scroll",N=100,P="--effect-type",y="--duration-time",M="--transition-time",R="--randomize-timing",H="--show-background",O="--show-side-slide",D="--create-navigation",k="--create-pagination",B="--create-selector";export class SliderSimplex{static create(t){if(t){const i=document.getElementById(t);if(i)return new SliderSimplex(i)}else for(const i of document.getElementsByClassName(_))new SliderSimplex(i);return null}#t;#h;#T;#e;#p;#S;#E;#g;#L;#b;#s;#i;#n=[];#r;#a=null;#l=null;#c=null;#m=null;#d=null;#o=0;#f=0;#u=!1;constructor(t){this.#t=t,this.#h=l(this.#t,P,"fade"),this.#T=o(this.#t,y,8),this.#e=o(this.#t,M,1),this.#p=e(this.#t,R),this.#S=e(this.#t,H,!1),this.#E=e(this.#t,O,!1),this.#g=e(this.#t,D),this.#L=e(this.#t,k),this.#b=e(this.#t,B);const i=this.#t.querySelector("."+C);this.#s=Array.from(i.getElementsByTagName("li")),this.#i=this.#s.length;for(const s of this.#s)s.dataset.effectType=s.dataset.effectType??this.#h;this.#S&&(this.#d=new T(this.#t,this.#s)),this.#E&&(i.style.overflow="visible"),this.initSlides(),c(this.#t),d(this.#t,r,N),f(()=>this.start())}getController(){return{move:i=>this.transition(i,this.#i===2?1:0),next:()=>this.transition(this.#o===this.#i-1?0:this.#o+1,1),prev:()=>this.transition(this.#o===0?this.#i-1:this.#o-1,-1),onTransitionEnd:i=>{this.#a=i}}}initSlides(){this.#h==="scroll"&&1<this.#i&&this.#i<5&&(this.cloneLis(),this.#i===2&&this.cloneLis());const t=this.#t.classList.contains(h);for(let s=0;s<this.#s.length;s+=1){const n=this.#s[s];t&&n.classList.add(h);const a=new L(n,s%this.#i,this.#i);this.#n.push(a)}switch(new ResizeObserver(()=>{for(const s of this.#n)s.onResize()}).observe(this.#t),this.#h){default:case"fade":this.#r=new b(this.#n,this.#e);break;case"slide":this.#r=new v(this.#n,this.#e);break;case"scroll":this.#r=new w(this.#n,this.#e);break}}cloneLis(){for(let t=0;t<this.#i;t+=1){const i=this.#s[t],s=this.#s[t].cloneNode(!0);this.#s.push(s),i.parentNode?.appendChild(s)}}start(){if(1<this.#i){const t=(i,s)=>this.transition(i,s);new p(this.#t,this.#e,t,this.#g),this.#m=new S(this.#t,this.#i,t,this.#L),this.#l=new g(this.#t,this.#s,this.#i,t,this.#b)}this.#c=new E(this.#t,this.#i),this.transition(0,0),setTimeout(()=>this.#t.classList.add(I),200),console.log(`Slider Simplex (#${this.#t.id}): started`),m((t,i)=>this.step())}transition(t,i){if(t===-1&&(t=u(this.#o+i,this.#i)),this.#d&&this.#d.transition(t),this.#m&&this.#m.transition(t),this.#c&&this.#c.transition(t),this.#l&&this.#l.transition(t),this.#r.transition(t,i),this.#o=t,this.#u=!0,1<this.#i){const s=this.#n[t].getDuration(this.#T,this.#e,this.#p);this.#f=window.performance.now()+s*1e3}}step(){this.#u&&!this.#r.isTransitioning()&&(this.#a&&this.#a(),this.#u=!1),!(window.performance.now()<this.#f)&&(!this.#t.classList.contains(r)||this.#t.classList.contains(A)||(this.#f=Number.MAX_VALUE,this.transition(-1,1)))}}
//# sourceMappingURL=slider-simplex.min.js.map
