var Bt=Object.defineProperty;var dt=n=>{throw TypeError(n)};var Pt=(n,t,e)=>t in n?Bt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var m=(n,t,e)=>Pt(n,typeof t!="symbol"?t+"":t,e),G=(n,t,e)=>t.has(n)||dt("Cannot "+e);var r=(n,t,e)=>(G(n,t,"read from private field"),e?e.call(n):t.get(n)),g=(n,t,e)=>t.has(n)?dt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),v=(n,t,e,i)=>(G(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),R=(n,t,e)=>(G(n,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();var I,P,Q,Et;const S=class S{constructor(t){g(this,P);g(this,I);v(this,I,t),t.className===""&&(t.classList.add(S.CLS_CAP),t.classList.add(S.CLS_SUBTITLE)),!t.classList.contains(S.CLS_LINE)&&!t.classList.contains(S.CLS_CIRCLE)&&t.classList.add(S.CLS_SUBTITLE),t.classList.contains(S.CLS_LINE)&&(t.dataset.caption=S.CLS_LINE),t.classList.contains(S.CLS_CIRCLE)&&(t.dataset.caption=S.CLS_CIRCLE),t.classList.contains(S.CLS_SUBTITLE)&&(t.dataset.caption=S.CLS_SUBTITLE);const e=t.querySelectorAll(":scope > div");for(const i of e)R(this,P,Q).call(this,i);R(this,P,Q).call(this,t),R(this,P,Et).call(this,t)}static create(t){const e=t.querySelector(":scope > div, :scope > a > div");return e?new S(e):null}getElement(){return r(this,I)}onResize(){window.innerWidth<600?(r(this,I).classList.remove(r(this,I).dataset.caption),r(this,I).classList.add(S.CLS_SUBTITLE)):(r(this,I).classList.remove(S.CLS_SUBTITLE),r(this,I).classList.add(r(this,I).dataset.caption))}};I=new WeakMap,P=new WeakSet,Q=function(t){var e,i;for(const s of Array.from(t.childNodes))if(s.nodeType===3){const o=((e=s.nodeValue)==null?void 0:e.trim())??"";if(o!==""){const a=document.createElement("span");a.appendChild(document.createTextNode(o)),(i=s.parentNode)==null||i.replaceChild(a,s)}}},Et=function(t){const e=[];for(const i of Array.from(t.childNodes))if(i.nodeType===1)if(i.tagName==="DIV"){if(e.length){const s=document.createElement("div");for(const o of e)s.appendChild(t.removeChild(o));t.insertBefore(s,i),e.length=0}}else e.push(i);if(e.length){const i=document.createElement("div");for(const s of e)i.appendChild(t.removeChild(s));t.appendChild(i)}},m(S,"CLS_CAP","-caption"),m(S,"CLS_SUBTITLE","subtitle"),m(S,"CLS_CIRCLE","circle"),m(S,"CLS_LINE","line");let J=S;var E,X,x;const T=class T{constructor(t){g(this,X);g(this,E);v(this,E,document.createElement("div")),r(this,E).classList.add(T.CLS_PIC);const e=t.querySelectorAll(":scope > img, :scope > a > img");if(e.length)r(this,E).appendChild(e[0]),1<e.length&&(r(this,E).classList.add(T.CLS_DUAL),r(this,E).appendChild(e[1]));else if(t.dataset.img){const i=R(this,X,x).call(this,t,{src:"img",srcset:"imgSrcset",sizes:"imgSizes"});if(r(this,E).appendChild(i),t.dataset.imgSub){r(this,E).classList.add(T.CLS_DUAL);const s=R(this,X,x).call(this,t,{src:"imgSub",srcset:"imgSubSrcset",sizes:"imgSubSizes"});r(this,E).appendChild(s)}}}getElement(){return r(this,E)}transition(t,e){}display(t){}getDuration(t,e,i){if(i){const s=1+.01*T.RANDOM_RATE*(1-Math.random()*2);return t*s}return t}onResize(){return!0}};E=new WeakMap,X=new WeakSet,x=function(t,e){const i=document.createElement("img");i.src=t.dataset[e.src];const s=t.dataset[e.srcset]??null,o=t.dataset[e.sizes]??null;return s&&(i.srcset=s),o&&(i.sizes=o),i},m(T,"NS","slider-simplex"),m(T,"CLS_PIC",T.NS+"-picture"),m(T,"CLS_DUAL","dual"),m(T,"RANDOM_RATE",10);let Z=T;var A,_,$,q,Tt,et;const O=class O{constructor(t){g(this,q);g(this,A);g(this,_);g(this,$,null);v(this,A,document.createElement("div")),r(this,A).classList.add(O.CLS_VIDEO);const e=t.querySelectorAll(":scope > video, :scope > a > video");if(e.length===1){const i=e[0];R(this,q,et).call(this,i),r(this,A).appendChild(i),v(this,_,i)}else if(t.dataset.video){const i=R(this,q,Tt).call(this,t);R(this,q,et).call(this,i),r(this,A).appendChild(i),v(this,_,i)}}getElement(){return r(this,A)}transition(t,e){t&&(r(this,_).setAttribute("autoplay","true"),r(this,_).play(),e===1&&r(this,_).setAttribute("loop","true"))}display(t){t||(r(this,_).pause(),r(this,_).currentTime=0)}getDuration(t,e,i){return r(this,_).duration-e}onResize(){if(!r(this,$))return!1;const t=r(this,A).clientWidth/r(this,A).clientHeight;return r(this,$)<t?(r(this,_).classList.remove("height"),r(this,_).classList.add("width")):(r(this,_).classList.remove("width"),r(this,_).classList.add("height")),!0}};A=new WeakMap,_=new WeakMap,$=new WeakMap,q=new WeakSet,Tt=function(t){const e=document.createElement("video"),i=document.createElement("source");return i.setAttribute("src",t.dataset.video),e.appendChild(i),e},et=function(t){t.muted=!0,t.playsInline=!0,t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t.addEventListener("loadedmetadata",()=>{const e=t.clientWidth/t.clientHeight;v(this,$,(0|e*1e3)/1e3)})},m(O,"NS","slider-simplex"),m(O,"CLS_VIDEO",O.NS+"-video");let tt=O;var z,N,y,B,Y,wt;const w=class w{constructor(t,e,i=!0){g(this,Y);g(this,z,0);g(this,N);g(this,y);g(this,B,"");v(this,z,e),v(this,N,i?J.create(t):null),R(this,Y,wt).call(this,t)?(v(this,y,new tt(t)),v(this,B,"video")):(v(this,y,new Z(t)),v(this,B,"image")),t.classList.contains(w.CLS_SCROLL)&&r(this,y).getElement().classList.add(w.CLS_SCROLL),t.insertBefore(r(this,y).getElement(),t.firstChild);const s=t.querySelector("a")??t;s.insertBefore(r(this,y).getElement(),s.firstChild)}getType(){return r(this,B)}onResize(){return r(this,B)==="video"&&!r(this,y).onResize()?!1:(r(this,N)&&r(this,N).onResize(),!0)}onPreDisplay(t,e){const i=r(this,z)%e===t?"add":"remove";r(this,y).getElement().classList[i](w.CLS_PRE_DISPLAY),r(this,N)&&r(this,N).getElement().classList[i](w.CLS_PRE_DISPLAY)}transition(t,e){r(this,y).transition(r(this,z)%e===t,e)}display(t,e){const i=r(this,z)%e===t?"add":"remove";r(this,y).getElement().classList[i](w.CLS_DISPLAY),r(this,N)&&r(this,N).getElement().classList[i](w.CLS_DISPLAY),r(this,y).display(r(this,z)%e===t)}getDuration(t,e,i){return r(this,y).getDuration(t,e,i)}};z=new WeakMap,N=new WeakMap,y=new WeakMap,B=new WeakMap,Y=new WeakSet,wt=function(t){return t.dataset.video?!0:t.querySelector(":scope > video, :scope > a > video")!==null},m(w,"CLS_SCROLL","scroll"),m(w,"CLS_PRE_DISPLAY","pre-display"),m(w,"CLS_DISPLAY","display");let st=w;const It=[];function qt(n,t=!1){t&&n(),It.push($t(n))}function Vt(n){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n):setTimeout(n,0)}function Ot(){window.addEventListener("resize",()=>{for(const n of It)n()},{passive:!0})}function $t(n){let t=!1;function e(){t=!1,n()}return()=>{t||(t=!0,requestAnimationFrame(e))}}function F(n,t=()=>{}){let e=null,i;return{set:()=>new Promise(s=>{i=s,e=setTimeout(async()=>{e=null,await t(),s()},n)}),clear:()=>{e&&(clearTimeout(e),e=null,i())}}}function Ft(n,t,e){new IntersectionObserver(s=>{for(const o of s)n.classList[o.isIntersecting?"add":"remove"](t)},{rootMargin:`${e}px 0px`}).observe(n),document.addEventListener("visibilitychange",()=>{if(document.visibilityState!=="hidden"){const o=n.getBoundingClientRect(),a=window.innerHeight;(0<o.top&&o.top<a||0<o.bottom&&o.bottom<a)&&n.classList.add(t)}else n.classList.remove(t)})}const ot="slider-simplex",Ut=ot+"-frame",Xt=ot+"-prev",Mt=ot+"-next",ht="active",mt=32;function kt(n,t,e,i){const s=e.getElementsByClassName(Ut)[0],o=e.getElementsByClassName(Xt)[0],a=e.getElementsByClassName(Mt)[0];if(t===1){o&&(o.style.display="none"),a&&(a.style.display="none");return}const u=async()=>{await i(null,-1)},l=async()=>{await i(null,1)};o&&o.addEventListener("click",async()=>{s.dataset.disabled="true",await u(),s.dataset.disabled="false"}),a&&a.addEventListener("click",async()=>{s.dataset.disabled="true",await l(),s.dataset.disabled="false"}),window.ontouchstart===null&&Ht(n,s,u,l,o,a)}function Ht(n,t,e,i,s,o){const a={prev:0,next:0};let u=null;t.addEventListener("touchstart",l=>{u=l.touches[0].pageX}),t.addEventListener("touchmove",l=>{if(u===null)return;const f=l.changedTouches[0].pageX;u+mt<f?(e(),Lt(n,l,s,"prev",a),u=null):f<u-mt&&(i(),Lt(n,l,o,"next",a),u=null)}),t.addEventListener("touchend",()=>{u=null})}function Lt(n,t,e,i,s){t.cancelable===!0&&t.preventDefault(),e&&(clearTimeout(s[i]),e.classList.add(ht),s[i]=setTimeout(()=>{e.classList.remove(ht)},n*1e3/2))}const bt="slider-simplex",Yt=bt+"-rivets",Wt=bt+"-rivet",St="visible",k=[];function jt(n,t,e,i){if(t===1)return;const s=e.getElementsByClassName(Yt)[0];if(!s)return;const o=t===2?1:0;for(let a=0;a<t;a+=1){const u=a,l=document.createElement("span");l.id=n+"-rivet-"+u,l.className=Wt,l.addEventListener("click",()=>{i(u,o)}),s.appendChild(l),k.push(l)}}function Kt(n){for(const t of k)t.classList.remove(St);k[n]&&k[n].classList.add(St)}const Rt="slider-simplex",Gt=Rt+"-slide-count",Jt=Rt+"-slide-index";let pt=[],it=[];function Qt(n,t){pt=t.querySelectorAll("."+Gt),it=t.querySelectorAll("."+Jt);for(const e of pt)e.innerHTML=""+n;for(const e of it)e.innerHTML="1"}function Zt(n){for(const t of it)t.innerHTML=""+(n+1)}const _t="visible",H=[];function xt(n,t){if(t!==1)for(let e=0;e<t;e+=1){const i=n+"-"+e;let s=document.querySelector('*[data-id="'+i+'"]');s||(s=document.getElementById(i)),H.push(s)}}function te(n){for(const t of H)t&&t.classList.remove(_t);H[n]&&H[n].classList.add(_t)}const ee="slider-simplex",se=ee+"-backgrounds",ie="visible",nt=[];function ne(n,t,e){const i=document.createElement("div");i.classList.add(se),t.insertBefore(i,t.firstChild);for(let s=0;s<n;s+=1){const o=e[s],a=document.createElement("div"),u=o.querySelector(":scope img");u&&(a.style.backgroundImage=`url('${u.src}')`),i.appendChild(a),nt.push(a)}}function oe(n,t){for(let e=0;e<t;e+=1)nt[e]&&nt[e].classList[e===n?"add":"remove"](ie)}class rt{constructor(t,e,i){m(this,"_size");m(this,"_lis");m(this,"_time");this._size=t,this._lis=e,this._time=i}}class re extends rt{constructor(t,e,i){super(t,e,i);for(let s=0;s<this._size;s+=1)this._lis[s].style.opacity=s===0?"1":"0";setTimeout(()=>{for(let s=0;s<this._size;s+=1)this._lis[s].style.transition="opacity "+this._time+"s"},10)}async transition(t,e){for(let i=0;i<this._size;i+=1)this._lis[i].style.opacity=i===t?"1":"0",this._lis[i].style.pointerEvents=i===t?"auto":"none";await F(this._time*1e3).set()}}class gt extends rt{constructor(t,e,i){super(t,e,i);for(let s=0;s<this._size;s+=1)this._lis[s].style.transform="translateX("+(s?100:0)+"%)";setTimeout(()=>{for(let s=0;s<this._size;s+=1)this._lis[s].style.opacity="1",this._lis[s].style.transition="transform "+this._time+"s"},10)}async transition(t,e){for(let i=0;i<this._size;i+=1)this._lis[i].style.transform=i<=t?"translateX(0%)":"translateX(100%)";await F(this._time*1e3).set()}}class ae extends rt{constructor(e,i,s){super(e,i,s);m(this,"_cur");m(this,"_curPsd");m(this,"_doing");m(this,"_queue");this._cur=0,this._curPsd=0,this._doing=!1,this._queue=[];const o=this._calcPosition(0,1);for(let a=0;a<this._lis.length;a+=1)this._lis[a].style.opacity="1",this._lis[a].style.transform=`translateX(${o[a]*100}%)`}async transition(e,i){if(this._queue.push((s,o)=>this._doTransition(s,o,e,i)),!this._doing){for(this._doing=!0;this._queue.length;)[this._cur,this._curPsd]=await this._queue.shift()(this._cur,this._curPsd);this._doing=!1}}async _doTransition(e,i,s,o){if(o===0&&e!==s){const f=e<s?s-e:s+this._size-e;o=(s<e?e-s:e+this._size-s)<f?-1:1}let a=this._calcPosition(i,o);for(let f=0;f<this._lis.length;f+=1)this._lis[f].style.transition="",this._lis[f].style.transform=`translateX(${a[f]*100}%)`;await F(100).set();let u=0;o===1&&(u=s-e),o===-1&&(u=e-s),u<0&&(u+=this._size);let l=i;for(let f=0;f<u;f+=1)[a,l]=this._shift(a,l,o,this._time/u,this._getTransition(u,f)),await F(Math.floor(this._time*1e3/u)).set();return[s,l]}_getTransition(e,i){if(e===1)return"ease";if(e===2){if(i===0)return"ease-in";if(i===1)return"ease-out"}return"linear"}_shift(e,i,s,o,a="ease"){const u=this._lis.length;let l=i+s;u-1<l&&(l=0),l<0&&(l=u-1);const f=this._calcPosition(l,s);for(let L=0;L<u;L+=1){const d=Math.abs(e[L]-f[L])===1?`transform ${o}s ${a}`:"";this._lis[L].style.transition=d,this._lis[L].style.transform=`translateX(${f[L]*100}%)`}return[f,l]}_calcPosition(e,i){const s=this._lis.length,o=new Array(s),a=i!==-1?Math.ceil((s-1)/2):Math.floor((s-1)/2),u=s-1-a;for(let l=1;l<=a;l+=1){let f=e+l;s-1<f&&(f-=s),o[f]=l}for(let l=1;l<=u;l+=1){let f=e-l;f<0&&(f+=s),o[f]=-l}return o[e]=0,o}}const at="slider-simplex",ce=at+"-frame",yt=at+"-slides",le="start",Ct="view",ue="pause",vt="scroll",fe=100;function me(n,t={}){const e=n?document.getElementById(n):document.getElementsByClassName(at)[0];if(!e)return;const i=(t==null?void 0:t.is_show)??!0,s=(t==null?void 0:t.effect_type)??"slide",o=(t==null?void 0:t.duration_time)??8,a=(t==null?void 0:t.transition_time)??1,u=(t==null?void 0:t.random_timing)??!1;let l=!1,f=!1;if(i&&(l=(t==null?void 0:t.background_visible)??!0,f=(t==null?void 0:t.side_slide_visible)??!1,e.style.setProperty("--transition-time",`${a}s`),s!=="scroll"&&(f=!1),f)){l=!1;const c=e.querySelector("."+yt);c.style.overflow="visible"}const L=Array.prototype.slice.call(e.querySelectorAll(`.${yt} > li`)),d=L.length,V=[];let U,W=null;const At=Nt();i&&l&&ne(d,e,L),At&&setTimeout(ct,100);function ct(){lt()||setTimeout(ct,100)}if(i){const c=e.getElementsByClassName(ce)[0];0<navigator.maxTouchPoints&&c.addEventListener("pointerenter",h=>{const p=h.pointerType==="mouse"?"remove":"add";c.classList[p]("touch")},{once:!0})}Vt(()=>{Ot(),i&&(kt(a,d,e,D),xt(n,d),Qt(d,e),jt(n,d,e,D)),Ft(e,Ct,fe),D(0,0),console.log(`Slider Simplex - Show (#${n}): started`),setTimeout(()=>e.classList.add(le),0)});function Nt(){i&&s==="scroll"&&1<d&&d<5&&(ut(),d===2&&ut());const c=e.classList.contains(vt);let h=!1;for(let p=0;p<L.length;p+=1){c&&L[p].classList.add(vt);const b=new st(L[p],p);b.getType()==="video"&&(h=!0),V.push(b)}switch(qt(lt,!0),s){case"slide":U=new gt(d,L,a);break;case"scroll":U=new ae(d,L,a);break;case"fade":U=new re(d,L,a);break;default:U=new gt(d,L,a);break}return h}function lt(){let c=!0;for(const h of V)h.onResize()||(c=!1);return c}function ut(){var c;for(let h=0;h<d;h+=1){const p=L[h],b=p.cloneNode(!0);L.push(b),(c=p.parentNode)==null||c.appendChild(b)}}let C=0,M=null,j=0,K=null;async function D(c,h){[c,h]=zt(c,h);const p=window.performance.now();if(h!==0&&p-j<a*1e3){K&&clearTimeout(K),K=setTimeout(()=>D(c,h),a*1e3-(p-j));return}j=p;for(const b of V)b.onPreDisplay(c,d);for(const b of V)b.transition(c,d);i&&(oe(c,d),te(c),Zt(c),Kt(c)),await U.transition(c,h),W&&W(),C=c,Dt(c)}async function Dt(c){for(const p of V)p.display(c,d);if(d===1)return;const h=V[c].getDuration(o,a,u);M&&M.clear(),M=F(Math.ceil(h*1e3),ft),await M.set()}async function ft(){e.classList.contains(Ct)&&!e.classList.contains(ue)?D(null,1):F(o*1e3,ft).set()}function zt(c,h){if(c===null)c=C+h,d-1<c&&(c=0),c<0&&(c=d-1);else if(h===0&&C!==c){const p=C<c?c-C:c+d-C;h=(c<C?C-c:C+d-c)<p?-1:1}return[c,h]}return{move:c=>D(c,d===2?1:0),next:()=>D(C===d-1?0:C+1,1),prev:()=>D(C===0?d-1:C-1,-1),onTransitionEnd:c=>{W=c}}}export{me as s};
